source "$XDG_CONFIG_HOME/neomutt/colors"
source "$XDG_CONFIG_HOME/neomutt/account_personal"

folder-hook personal/* source "$XDG_CONFIG_HOME/neomutt/account_personal"
folder-hook work/*     source "$XDG_CONFIG_HOME/neomutt/account_work"

# Personal folders
set folder = "$HOME/Mail/"
mailboxes = +personal"
mailboxes = +personal/etc"
mailboxes = +personal/etc/corporate-logos"
mailboxes = +personal/etc/music"
mailboxes = +personal/etc/newsletters"
mailboxes = +personal/etc/work"
mailboxes = +personal/finances"
mailboxes = +personal/finances/bills"
mailboxes = +personal/finances/education"
mailboxes = +personal/finances/insurance"
mailboxes = +personal/finances/purchases"
mailboxes = +personal/finances/taxes"
mailboxes = +personal/misc"
mailboxes = +personal/misc/all"
mailboxes = +personal/misc/drafts"
mailboxes = +personal/misc/sent"
# Work folders
mailboxes = +work"
mailboxes = +work/waiting"
mailboxes = +work/misc"
mailboxes = +work/misc/all"
mailboxes = +work/misc/drafts"
mailboxes = +work/misc/sent"

set spoolfile = "$HOME/Mail/personal/inbox"

# Store message headers locally to speed things up.
# If hcache is a folder, Mutt will create sub cache folders for each account which may speeds things up even more.
set header_cache = "$XDG_CACHE_HOME/neomutt"

# Store messages locally to speed things up, like searching message bodies.
# Can be the same folder as header_cache.
# This will cost important disk usage according to your e-mail amount.
set message_cachedir = "$XDG_CACHE_HOME/neomutt"

# Specify where to save and/or look for postponed messages.
#set postponed = +[Gmail]/Drafts

# Allow Mutt to open a new IMAP connection automatically.
unset imap_passive

# Keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

# How often to check for new mail (time in seconds).
set mail_check = 120

set mailcap_path = "$XDG_CONFIG_HOME/neomutt/mailcap"
auto_view text/html

set sidebar_visible
#set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set sidebar_format = "%B%?F? [%F]?%* %?N?%N?"
set mail_check_stats
set sidebar_width = 20

set sidebar_short_path
# Shorten mailbox names
set sidebar_delim_chars="/"
# Delete everything up to the last / character
set sidebar_folder_indent
# Indent folders whose names we've shortened
set sidebar_indent_string="  "
# Indent with two spaces

## Credit: http://stevelosh.com/blog/2012/10/the-homely-mutt/
# Index View Options ---------------------------------
set date_format = "%F %H:%M"
set index_format = "[%Z]  %D  %-20.20F  %s"
set sort = threads                         # like gmail
set sort_aux = reverse-last-date-received  # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

## Credit: https://github.com/webgefrickel/dotfiles
# Misc options
alternative_order text/plain text/enriched text/html
set fast_reply                       # skip to compose when replying
set include                          # include message in replies
set forward_quote                    # include message in forwards
set text_flowed
unset wait_key

# Get addresses from mu
set query_command = "mu cfind --format=mutt-ab '%s'"
#bind editor <tab> complete-query

# some sane vim-like keybindings
bind index,pager k previous-entry
bind index,pager j next-entry
bind index,pager g noop
bind index,pager R group-reply

bind index gg first-entry
bind index G last-entry
bind index <tab> sync-mailbox

bind pager gg top
bind pager G bottom

# View attachments properly.
bind attach <return> view-mailcap

bind compose P postpone-message
bind index p recall-message

# write a new email to the sender of selected email
bind index,pager @ compose-to-sender

# finding stuff
bind editor <tab> complete-query

# Sidebar Navigation
bind index <PageDown> sidebar-next
bind index <PageUp> sidebar-prev
bind index <space> sidebar-open
bind index,pager . sidebar-next
bind index,pager , sidebar-prev
bind index,pager \CO sidebar-open
macro index,pager gp "<change-folder> +personal/<Enter>"
macro index,pager gw "<change-folder> +work/<Enter>"

# Pager Navigation
bind pager <Up> previous-line
bind pager <Down> next-line
set pager_stop = yes

set hostname = "masked.fqdn"

